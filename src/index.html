<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>TaskFlow PWA</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <link rel="manifest" href="manifest.webmanifest">
    <meta name="theme-color" content="#1976d2">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <style>
        .offline-fallback {
            display: none;
            text-align: center;
            padding: 20px;
            margin: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .offline-icon {
            font-size: 48px;
            color: #6c757d;
            margin-bottom: 20px;
        }
    </style>
    <script>
        // Display offline fallback if loading fails
        window.addEventListener('load', function() {
            // Check if the app root has been populated
            setTimeout(function() {
                var appRoot = document.querySelector('app-root');
                if (appRoot && appRoot.children.length === 0 && !navigator.onLine) {
                    var fallback = document.getElementById('offline-fallback');
                    if (fallback) {
                        fallback.style.display = 'block';
                    }
                }
            }, 3000);
        });
    </script>
</head>

<body>
    <app-root></app-root>
    <div id="offline-fallback" class="offline-fallback">
        <div class="offline-icon">
            <i class="fa fa-wifi"></i>
        </div>
        <h2>You are offline</h2>
        <p>TaskFlow is currently offline. Please check your internet connection.</p>
        <button class="btn btn-primary mt-3" onclick="window.location.reload()">
            <i class="fa fa-refresh mr-2"></i> Retry
        </button>
    </div>
    <noscript>Please enable JavaScript to continue using this application.</noscript>
</body>

</html>